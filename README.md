# POWERSHELL-FMS  #

This is a collection of powershell scripts to make FIleMaker Server DevOps automation and administration a little less painful at Proof. These tools are intended to help problems such as:

* installing letencrypt SSL certificates via WACS (Win-Acme)
* encrypting FileMaker admin username and password so that we can use various powershell scripts to run as admin without storing sensitive info in cleartext
* dynamically register new IP address with AWS Route53 when the server restarts/reboots
* running S3 sync to backup FileMaker backups and container data

## USAGE ##

Download these scripts from the bitbucket repository.

#### fms Scripts ####

##### EncyptFMSCreds.ps1 #####

Saves your FileMaker Server admin console credentials to an encrypted file object for use by robots, scheduled events or other scripts later.

Command:

     EncyptFMSCreds -filename "{filename}" -path "{somepath}" -u "{fmsadminUsername}" -p "{fmsadminPassword}"

If no `-filename` or `-path` arguments are found, it will default to the filename, `FMSCreds.xml` and the directory, `C:\Program Files\FileMaker\FileMaker Server\CStore`.

Note: Quotes are optional and are used to escape arguments that contain spaces.

Example:
  
     ./EncyptFMSCreds.ps1 -filename fmsSecrets.xml -path C:\mysecrets -u theadminuser -p thepassword

##### InstallSSL.ps1 #####

InstallSSL is a powershell script that imports LetsEncrypt certificates generated by wacs (win-acme) into FileMaker Server 16 and later. It uses the credentials file generated by the `EncryptFMSCredentials.ps1` script above to tell perform `fmsadmin` `CERTIFICATE` commands on your behalf.

### Route53 ###

DynamicDns stuff

#### R53 Scripts ####

* Updates Route53 DNS
* RefreshR53.ps1
* UpsertR53.ps1

#### Requirements #####

* set up an AWS IAM user
* download Windows AWS Tools
* download Windows AWS CLI Tools
  
#### Known Issues #####

Not tested on MacOS X. May work with tweaks to paths but ymmv.
